# Google AdMob 激励视频广告集成指南

## 功能说明

本项目集成了 Google AdMob 激励视频广告，用户可以通过观看广告获得额外的灵性值（+3 次）。

## 当前状态

✅ **已集成广告框架**
- 模拟广告播放（开发/测试环境）
- 移动设备检测
- 广告奖励机制

⚠️ **需要配置生产环境**
- 注册 Google AdMob 账号
- 创建应用和广告单元
- 配置真实广告 ID

## 开发环境测试

当前使用模拟广告，无需配置即可测试：

1. 使用完 3 次免费提问
2. 点击"观看广告"按钮
3. 观看 5 秒模拟广告
4. 获得 +3 灵性值

## 生产环境配置

### 1. 注册 AdMob 账号

访问 [Google AdMob](https://apps.admob.com/) 并注册账号。

### 2. 创建应用

1. 登录 AdMob 后台
2. 点击 **应用** → **添加应用**
3. 选择应用类型：
   - **已发布**: 应用已在应用商店上架
   - **尚未发布**: 应用还在开发中
4. 填写应用信息：
   - 应用名称: `诡秘之主非凡者评估`
   - 平台: **Web**
5. 获取应用 ID（格式: `ca-app-pub-XXXXXXXXXXXXXXXX~YYYYYYYYYY`）

### 3. 创建激励视频广告单元

1. 在应用详情页，点击 **广告单元** → **创建广告单元**
2. 选择广告类型: **激励视频**
3. 填写信息:
   - 名称: `灵性值奖励`
   - 广告单元 ID: 自动生成（格式: `ca-app-pub-XXXXXXXXXXXXXXXX/ZZZZZZZZZZ`）
4. 复制广告单元 ID

### 4. 配置环境变量

在 `.env` 文件中添加:

```bash
VITE_ADMOB_REWARDED_AD_ID=ca-app-pub-XXXXXXXXXXXXXXXX/ZZZZZZZZZZ
```

在 Vercel 部署时，添加相同的环境变量。

### 5. 测试广告

在正式上线前，使用 Google 提供的测试广告 ID:

```
测试 ID: ca-app-pub-3940256099942544/5224354917
```

## 注意事项

### 移动设备限制

AdMob 激励视频广告主要支持移动设备（Android/iOS）。桌面端会自动跳过广告加载。

### 广告展示频率

建议设置合理的展示频率，避免：
- 过于频繁影响用户体验
- 违反 Google AdMob 政策

当前实现：每次观看可获得 +3 次灵性值，无次数限制。

### 收益说明

激励视频广告的 eCPM（千次展示收益）因地区和用户群而异：
- 亚洲: $5-15 USD
- 欧美: $10-30 USD

## 替代方案

如果不使用 AdMob，可以考虑：

### 1. 国内广告平台

- **穿山甲 (Pangle)** - 字节跳动
- **优量汇** - 腾讯
- **百青藤** - 百度

### 2. 其他变现方式

- 会员订阅
- 内购解锁
- 内容付费

## 监控和优化

### AdMob 后台监控

1. 查看广告展示次数
2. 监控 eCPM 和收益
3. 分析用户观看完成率

### 优化建议

1. **提升完成率**: 在弹窗中明确说明奖励
2. **合理提示**: 只在需要时展示广告选项
3. **A/B 测试**: 测试不同文案和提示时机

## 常见问题

### Q: 广告不显示？

A: 检查以下项：
1. 是否在移动设备上访问
2. 网络连接是否正常
3. 浏览器是否支持（建议 Chrome/Safari）
4. 广告单元 ID 是否正确

### Q: 如何验证广告配置？

A:
1. 开发环境使用测试 ID
2. 生产环境查看 AdMob 后台报告
3. 检查浏览器控制台日志

### Q: 收益如何结算？

A:
1. AdMob 每月结算
2. 最低支付金额 $100
3. 支持多种支付方式

## 技术实现

### 文件结构

```
src/utils/admob.ts         # AdMob 广告服务
src/pages/Responder.tsx    # 广告调用集成
```

### 核心功能

1. **自动初始化**: 页面加载时检测并初始化
2. **移动端检测**: 仅在移动设备加载广告
3. **模拟广告**: 开发环境使用模拟广告
4. **奖励机制**: 观看完成后增加灵性值

### API 接口

```typescript
// 初始化广告
await initAdMob(): Promise<boolean>

// 显示激励广告
await showRewardedAd(): Promise<boolean>

// 检查广告状态
isAdLoaded(): boolean

// 获取配置信息
getAdConfig(): object
```

## 更新日志

- **2025-01-18**: 初始集成，支持模拟广告
- 待添加: 真实 AdMob SDK 集成
