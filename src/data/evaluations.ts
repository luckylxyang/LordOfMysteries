import { Pathway } from '../types'

// 个性化评语模板系统
export const commentaryTemplates: Record<string, string[]> = {
  seer: [
    '{name}，你的灵性如迷雾般弥漫。你能看见常人忽视的细节，在混乱中寻找规律。你的直觉往往比逻辑更准确——相信它。但要小心，窥探命运的代价，是承受真相的重量。',
    '命运选择了你，{name}。在他人眼中，世界是确定无疑的；而你却能看见无数可能的未来分支。这是一份礼物，也是诅咒。学会选择何时窥探，何时闭眼。',
    '灰雾之上的启示等待着你的召唤，{name}。你的灵魂天生渴望解析神秘学的符号与征兆。保持敬畏之心，但不要被恐惧束缚——真正的占卜家，在迷雾中亦能前行。'
  ],
  audience: [
    '{name}，你生来就是观察者。世界对你是透明的舞台，而你总能看穿演员们的面具。这份洞察力是强大的武器，但也请记住：过度理解人心，有时会让人孤独。',
    '人心即剧本，而你是最敏锐的评论家，{name}。你能读取最细微的表情变化，听见未说出口的话语。这份能力让你在社交场上如鱼得水，但别忘了：偶尔卸下面具，真实地活一次。',
    '{name}，你理解人类情感的频率与节奏。你能引导情绪的潮汐，让他人欢笑或哭泣。但要警惕：操纵人心的艺术，若没有底线的约束，终将反噬其主。'
  ],
  apprentice: [
    '{name}，距离对你而言只是概念。你天生就能看见空间的裂缝，找到常人无法察觉的路径。这份自由令人羡慕，但也请记住：最珍贵的，往往就在触手可及之处。',
    '世界对你来说是一个可以折叠的纸盒，{name}。你总能找到捷径，绕过障碍，到达目的地。你的学习能力极强，观察入微——但真正的学徒知道，有些捷径通往的终点，未必是你想要的。',
    '{name}，你拥有超越常人的想象力与实践能力。你眼中的世界充满了可能性与未知的大门。保持这份好奇心，但也要学会：有些门，打开之后就再也关不上了。'
  ],
  hunter: [
    '{name}，危险就是你的猎场。你拥有野兽般的直觉与战士的果断。面对邪恶，你从不退缩——这种纯粹的正直与勇气，是黑暗世界中最稀缺的光。',
    '狩猎写在你的基因里，{name}。你追踪、你伏击、你终结。你的生命力顽强，意志坚定，是不可撼动的磐石。但要记住：并非所有怪物都需要被消灭，有些需要被理解。',
    '{name}，你是黑夜中的守护者。你的存在本身就是对邪恶生物的威慑。强健的体魄、敏锐的感官、不屈的意志——这些都是你的武器。但真正的猎人知道，最强大的猎物，往往藏在最深的阴影里。'
  ],
  arbiter: [
    '{name}，你心中有一杆秤。你渴望秩序，厌恶混乱，能在模糊的情境中划出清晰的界线。这种决断力让你成为天生的领袖，但也要警惕：绝对的规则，有时会创造新的不公。',
    '{name}，律法对你而言不是束缚，而是工具。你擅长在规则之内找到最优解，也能用规则束缚他人。这是一种强大的能力——但请记住，真正的仲裁者，审判的是人心，不只是行为。',
    '平衡是你的追求，{name}。你能在秩序与自由之间找到微妙的平衡点。你施加的诅咒精准而有效，你的契约无人能违。但要小心：玩弄规则的人，终将被规则反噬。'
  ]
}

// 根据分数和用户信息生成评语
export function generateCommentary(
  pathway: Pathway,
  userName: string = 'Seeker'
): string {
  const templates = commentaryTemplates[pathway.id]
  // 随机选择一个模板
  const template = templates[Math.floor(Math.random() * templates.length)]
  return template.replace(/{name}/g, userName)
}

// 根据用户特质生成个性化格言
export function generateCustomMotto(
  pathway: Pathway,
  traits: string[]
): string {
  const defaultMottos = pathway.motto
  return defaultMottos[Math.floor(Math.random() * defaultMottos.length)]
}
